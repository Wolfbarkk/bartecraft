================================================================================
           SISTEMA DE PAGAMENTO AUTOMATIZADO - FLUXO DETALHADO
================================================================================

ğŸ¯ OBJETIVO: Cliente paga R$ 25,00 e recebe VIP automaticamente em SEGUNDOS!

================================================================================
                            VISÃƒO GERAL DO SISTEMA
================================================================================

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Cliente   â”‚ â”€â”€â”€> â”‚ Mercado Pago â”‚ â”€â”€â”€> â”‚   Backend   â”‚ â”€â”€â”€> â”‚   Minecraft  â”‚
â”‚   (Site)    â”‚      â”‚   (Gateway)  â”‚      â”‚  (Node.js)  â”‚      â”‚   (Plugin)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     Paga              Processa              Recebe webhook       Ativa VIP
   R$ 25,00            Pagamento             NotificaÃ§Ã£o          Automaticamente

================================================================================
                        PASSO 1: CLIENTE ACESSA O SITE
================================================================================

1.1 - Cliente entra no site: https://bartexcraft.net

1.2 - Cliente navega atÃ© a seÃ§Ã£o VIP

1.3 - Cliente vÃª as informaÃ§Ãµes:
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚         ğŸŒŸ VIP VITALÃCIO ğŸŒŸ           â”‚
      â”‚                                        â”‚
      â”‚         Apenas R$ 25,00                â”‚
      â”‚                                        â”‚
      â”‚  âœ… Tag colorida [VIP]                â”‚
      â”‚  âœ… 20 replays por modo               â”‚
      â”‚  âœ… 200 amigos                        â”‚
      â”‚  âœ… Ilhas customizadas                â”‚
      â”‚  âœ… /skin url                         â”‚
      â”‚  âœ… Party no solo                     â”‚
      â”‚                                        â”‚
      â”‚      [COMPRAR VIP AGORA]              â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

1.4 - Cliente clica em "COMPRAR VIP AGORA"

================================================================================
                    PASSO 2: CLIENTE PREENCHE FORMULÃRIO
================================================================================

2.1 - Modal de pagamento abre com formulÃ¡rio:
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚      Comprar VIP - R$ 25,00           â”‚
      â”‚                                        â”‚
      â”‚  Nick no Minecraft:                   â”‚
      â”‚  [_________________]                  â”‚
      â”‚                                        â”‚
      â”‚  Email:                               â”‚
      â”‚  [_________________]                  â”‚
      â”‚                                        â”‚
      â”‚      [PAGAR COM MERCADO PAGO]         â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

2.2 - Cliente digita:
      - Nick: "Steve123"
      - Email: "steve@email.com"

2.3 - Cliente clica em "PAGAR COM MERCADO PAGO"

================================================================================
                    PASSO 3: SITE ENVIA DADOS PARA BACKEND
================================================================================

3.1 - JavaScript do site faz requisiÃ§Ã£o POST:

      URL: https://seu-backend.render.com/create-payment
      
      Dados enviados (JSON):
      {
        "nick": "Steve123",
        "email": "steve@email.com"
      }

3.2 - Backend (server.js) recebe a requisiÃ§Ã£o

3.3 - Backend valida os dados:
      âœ“ Nick nÃ£o estÃ¡ vazio
      âœ“ Email Ã© vÃ¡lido
      âœ“ Nick tem entre 3-16 caracteres

================================================================================
              PASSO 4: BACKEND CRIA PAGAMENTO NO MERCADO PAGO
================================================================================

4.1 - Backend prepara dados do pagamento:
      {
        "title": "VIP VitalÃ­cio - BartexCraft",
        "quantity": 1,
        "unit_price": 25.00,
        "payer": {
          "email": "steve@email.com"
        },
        "metadata": {
          "minecraft_nick": "Steve123"
        },
        "notification_url": "https://seu-backend.render.com/webhook"
      }

4.2 - Backend envia para API do Mercado Pago:
      POST https://api.mercadopago.com/checkout/preferences
      Headers: Authorization: Bearer SEU_ACCESS_TOKEN

4.3 - Mercado Pago responde com:
      {
        "id": "123456789",
        "init_point": "https://www.mercadopago.com.br/checkout/v1/redirect?pref_id=123456789"
      }

4.4 - Backend retorna para o site:
      {
        "init_point": "https://www.mercadopago.com.br/checkout/v1/redirect?pref_id=123456789"
      }

================================================================================
                PASSO 5: CLIENTE Ã‰ REDIRECIONADO PARA MERCADO PAGO
================================================================================

5.1 - Site abre nova aba com link do Mercado Pago

5.2 - Cliente vÃª pÃ¡gina de pagamento do Mercado Pago:
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚        MERCADO PAGO                   â”‚
      â”‚                                        â”‚
      â”‚  VIP VitalÃ­cio - BartexCraft          â”‚
      â”‚  R$ 25,00                             â”‚
      â”‚                                        â”‚
      â”‚  Escolha como pagar:                  â”‚
      â”‚  â—‹ PIX                                â”‚
      â”‚  â—‹ CartÃ£o de CrÃ©dito                  â”‚
      â”‚  â—‹ Boleto                             â”‚
      â”‚                                        â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

5.3 - Cliente escolhe mÃ©todo de pagamento (exemplo: PIX)

================================================================================
                        PASSO 6: CLIENTE PAGA COM PIX
================================================================================

6.1 - Mercado Pago gera QR Code PIX

6.2 - Cliente escaneia QR Code com app do banco

6.3 - Cliente confirma pagamento no app do banco

6.4 - Banco processa pagamento (1-5 segundos)

6.5 - Banco confirma para Mercado Pago: "PAGAMENTO APROVADO"

================================================================================
                    PASSO 7: MERCADO PAGO NOTIFICA BACKEND
================================================================================

7.1 - Mercado Pago detecta pagamento aprovado

7.2 - Mercado Pago envia webhook para backend:
      POST https://seu-backend.render.com/webhook
      
      Dados:
      {
        "action": "payment.updated",
        "data": {
          "id": "987654321"
        }
      }

7.3 - Backend recebe notificaÃ§Ã£o

7.4 - Backend registra no log:
      [WEBHOOK] Recebida notificaÃ§Ã£o: payment.updated
      [WEBHOOK] Payment ID: 987654321

================================================================================
                PASSO 8: BACKEND BUSCA DETALHES DO PAGAMENTO
================================================================================

8.1 - Backend faz requisiÃ§Ã£o para Mercado Pago:
      GET https://api.mercadopago.com/v1/payments/987654321
      Headers: Authorization: Bearer SEU_ACCESS_TOKEN

8.2 - Mercado Pago responde com detalhes:
      {
        "id": 987654321,
        "status": "approved",
        "metadata": {
          "minecraft_nick": "Steve123"
        },
        "transaction_amount": 25.00
      }

8.3 - Backend valida:
      âœ“ Status = "approved"
      âœ“ Valor = 25.00
      âœ“ Nick existe nos metadados

================================================================================
            PASSO 9: BACKEND CHAMA API DO PLUGIN MINECRAFT
================================================================================

9.1 - Backend prepara requisiÃ§Ã£o para plugin:
      URL: http://SEU_IP_SERVIDOR:8080/api/vip/add
      
      Dados (JSON):
      {
        "nick": "Steve123",
        "duration": "permanent"
      }

9.2 - Backend envia POST para o plugin

9.3 - Backend registra no log:
      [VIP] Ativando VIP para: Steve123
      [VIP] Chamando API do plugin...

================================================================================
                PASSO 10: PLUGIN MINECRAFT RECEBE REQUISIÃ‡ÃƒO
================================================================================

10.1 - Plugin VIPSystem recebe na porta 8080

10.2 - Endpoint /api/vip/add processa:
       - Valida JSON
       - Extrai nick: "Steve123"
       - Extrai duraÃ§Ã£o: "permanent"

10.3 - Plugin registra no console:
       [VIPSystem] API: Recebida requisiÃ§Ã£o para adicionar VIP
       [VIPSystem] API: Nick = Steve123
       [VIPSystem] API: DuraÃ§Ã£o = permanent

================================================================================
                    PASSO 11: PLUGIN ATIVA VIP NO SERVIDOR
================================================================================

11.1 - Plugin executa comando via console:
       vip add Steve123 permanent

11.2 - VIPManager adiciona jogador Ã  lista de VIPs:
       - Adiciona em vips.yml
       - Salva arquivo
       - Atualiza cache em memÃ³ria

11.3 - Plugin verifica se jogador estÃ¡ online:
       Player player = Bukkit.getPlayer("Steve123");
       
       SE ONLINE:
       - Atualiza permissÃµes
       - Envia mensagem: "Â§a[VIP] VocÃª agora Ã© VIP!"
       - Atualiza scoreboard
       - Aplica tag [VIP]
       
       SE OFFLINE:
       - VIP serÃ¡ aplicado no prÃ³ximo login

11.4 - Plugin responde para backend:
       HTTP 200 OK
       {
         "success": true,
         "message": "VIP ativado com sucesso para Steve123"
       }

================================================================================
                    PASSO 12: BACKEND CONFIRMA SUCESSO
================================================================================

12.1 - Backend recebe resposta do plugin

12.2 - Backend registra no log:
       [VIP] âœ“ VIP ativado com sucesso!
       [VIP] Nick: Steve123
       [VIP] Status: permanent

12.3 - Backend responde para Mercado Pago:
       HTTP 200 OK

================================================================================
                    PASSO 13: CLIENTE RECEBE VIP NO SERVIDOR
================================================================================

13.1 - SE CLIENTE ESTÃ ONLINE:
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚  [VIP] VocÃª agora Ã© VIP!              â”‚
       â”‚  Aproveite seus benefÃ­cios!           â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       
       - Tag muda para: Â§6Â§l[VIP] Â§6Steve123
       - Scoreboard atualiza
       - PermissÃµes aplicadas

13.2 - SE CLIENTE ESTÃ OFFLINE:
       - VIP salvo em vips.yml
       - Ao fazer login:
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚  [VIP] Bem-vindo de volta, VIP!       â”‚
         â”‚  Seus benefÃ­cios estÃ£o ativos!        â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

================================================================================
                            TEMPO TOTAL DO PROCESSO
================================================================================

Passo 1-5:  Cliente preenche e Ã© redirecionado     ~10 segundos
Passo 6:    Cliente paga com PIX                   ~5 segundos
Passo 7-9:  Webhook e processamento backend        ~2 segundos
Passo 10-11: Plugin ativa VIP                      ~1 segundo
Passo 12-13: ConfirmaÃ§Ã£o e notificaÃ§Ã£o             ~1 segundo

TOTAL: ~20 SEGUNDOS DO PAGAMENTO ATÃ‰ RECEBER VIP! âš¡

================================================================================
                            FLUXO DE DADOS TÃ‰CNICO
================================================================================

1. SITE â†’ BACKEND
   POST /create-payment
   { nick, email }
   â†“
   Resposta: { init_point }

2. MERCADO PAGO â†’ BACKEND
   POST /webhook
   { action, data: { id } }
   â†“
   Backend busca detalhes do pagamento

3. BACKEND â†’ MERCADO PAGO
   GET /v1/payments/{id}
   â†“
   Resposta: { status, metadata, amount }

4. BACKEND â†’ PLUGIN
   POST http://IP:8080/api/vip/add
   { nick, duration }
   â†“
   Resposta: { success, message }

5. PLUGIN â†’ MINECRAFT
   Comando: vip add {nick} permanent
   â†“
   VIP ativado!

================================================================================
                            SEGURANÃ‡A DO SISTEMA
================================================================================

âœ“ Webhook validado pelo Mercado Pago
âœ“ Backend verifica status "approved"
âœ“ Backend valida valor do pagamento (R$ 25,00)
âœ“ Plugin valida requisiÃ§Ãµes da API
âœ“ Nick validado (3-16 caracteres, alfanumÃ©rico)
âœ“ Logs completos de todas as operaÃ§Ãµes
âœ“ Tratamento de erros em cada etapa

================================================================================
                            CUSTOS DO SISTEMA
================================================================================

Backend (Render.com):        R$ 0,00/mÃªs (plano gratuito)
Mercado Pago:                4.99% + R$ 0,49 por venda
DomÃ­nio (opcional):          ~R$ 40,00/ano

Exemplo de venda:
- Cliente paga:              R$ 25,00
- Taxa Mercado Pago:         R$ 1,74 (4.99% + R$ 0,49)
- VocÃª recebe:               R$ 23,26

================================================================================
                            VANTAGENS DO SISTEMA
================================================================================

âœ… 100% AUTOMATIZADO - Zero trabalho manual
âœ… RÃPIDO - VIP em segundos apÃ³s pagamento
âœ… SEGURO - ValidaÃ§Ãµes em todas as etapas
âœ… CONFIÃVEL - Mercado Pago Ã© lÃ­der no Brasil
âœ… BARATO - Sem mensalidades, sÃ³ taxa por venda
âœ… ESCALÃVEL - Suporta milhares de vendas
âœ… PROFISSIONAL - Sistema usado por grandes servidores

================================================================================
                            MONITORAMENTO
================================================================================

LOGS DO BACKEND (Render.com):
- Acesse: https://dashboard.render.com
- Veja logs em tempo real
- Monitore webhooks recebidos
- Verifique erros

LOGS DO PLUGIN (Minecraft):
- Arquivo: logs/latest.log
- Busque por: [VIPSystem] API
- Verifique ativaÃ§Ãµes de VIP

PAINEL MERCADO PAGO:
- Acesse: https://www.mercadopago.com.br
- Veja vendas em tempo real
- Acompanhe recebimentos
- Baixe relatÃ³rios

================================================================================
                            SUPORTE E TROUBLESHOOTING
================================================================================

PROBLEMA: Cliente pagou mas nÃ£o recebeu VIP

SOLUÃ‡ÃƒO:
1. Verifique logs do backend (Render.com)
2. Procure por webhook do pagamento
3. Verifique se API do plugin foi chamada
4. Confira logs do Minecraft
5. Se necessÃ¡rio, ative VIP manualmente: /vip add {nick} permanent

PROBLEMA: Webhook nÃ£o estÃ¡ chegando

SOLUÃ‡ÃƒO:
1. Verifique URL do webhook no Mercado Pago
2. Confirme que backend estÃ¡ online
3. Teste webhook manualmente
4. Verifique firewall/porta

PROBLEMA: Plugin nÃ£o responde na API

SOLUÃ‡ÃƒO:
1. Verifique se plugin estÃ¡ carregado
2. Confirme porta 8080 aberta
3. Teste: http://SEU_IP:8080/api/vip/check
4. Verifique logs do plugin

================================================================================
                            CONCLUSÃƒO
================================================================================

Este sistema permite que vocÃª venda VIP 24/7 de forma completamente automÃ¡tica!

Cliente paga â†’ Recebe VIP em SEGUNDOS â†’ VocÃª lucra!

Sem trabalho manual, sem atrasos, sem complicaÃ§Ãµes.

Sistema profissional, seguro e confiÃ¡vel! ğŸš€

================================================================================
                    Desenvolvido para BartexCraft
                    Sistema de Pagamento Automatizado v1.0
================================================================================
